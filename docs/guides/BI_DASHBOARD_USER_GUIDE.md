# BIダッシュボード ユーザーガイド

## 目次
1. [概要](#概要)
2. [アクセス方法](#アクセス方法)
3. [ダッシュボードの見方](#ダッシュボードの見方)
4. [各グラフの詳細](#各グラフの詳細)
5. [データの更新方法](#データの更新方法)
6. [FAQ](#faq)

---

## 概要

Polibase BIダッシュボードは、全国の自治体（governing bodies）におけるデータ収集状況を可視化するツールです。全国1,966の自治体について、どれだけのデータが収集されているかをインタラクティブに確認できます。

### 主な機能

- **全体カバレッジ率の表示**: 円グラフで全国のデータ収集状況を一目で把握
- **組織タイプ別カバレッジ**: 国/都道府県/市町村別の棒グラフで詳細を確認
- **都道府県別カバレッジ**: 上位10都道府県のカバレッジ詳細テーブル
- **リアルタイム更新**: 更新ボタンでデータを再取得

---

## アクセス方法

### 1. ブラウザでアクセス

ダッシュボードにアクセスするには、以下のURLをブラウザで開きます：

```
http://localhost:8050
```

### 2. 推奨ブラウザ

以下のブラウザでの動作を確認しています：

- Google Chrome（推奨）
- Mozilla Firefox
- Microsoft Edge
- Safari

### 3. 注意事項

- ダッシュボードはローカルネットワークからのみアクセス可能です
- インターネット経由でのアクセスには対応していません
- ダッシュボードが起動していない場合は、運用担当者に連絡してください

---

## ダッシュボードの見方

ダッシュボードは以下の5つのセクションで構成されています：

### 1. ヘッダーセクション（最上部）

- **タイトル**: 「Polibase データカバレッジダッシュボード」
- **説明**: 「全国の自治体データ収集状況を可視化」

### 2. サマリーカードセクション（上部）

3つのカードで全体の状況を表示します：

| カード名 | 説明 | 色の意味 |
|---------|------|----------|
| 総自治体数 | 全国の自治体総数（1,966） | 青色 |
| データ取得済み | データが収集されている自治体数 | 緑色 |
| カバレッジ率 | データ取得率（パーセンテージ） | 赤（50%未満）<br>黄（50-80%）<br>緑（80%以上） |

### 3. グラフセクション（中央）

左右に2つのグラフを配置：

- **左側**: 全体カバレッジ率（円グラフ）
- **右側**: 組織タイプ別カバレッジ（棒グラフ）

### 4. テーブルセクション（下部）

都道府県別カバレッジの詳細テーブルを表示します。

### 5. 更新ボタン（最下部）

「データを更新」ボタンで最新のデータを取得できます。

---

## 各グラフの詳細

### 1. 全体カバレッジ率（円グラフ）

![全体カバレッジ率](../images/coverage-pie-chart.png)

#### 見方

- **ドーナツ型グラフ**: 中央に穴が開いた円グラフ
- **緑色の部分**: データが収集されている自治体
- **赤色の部分**: データが収集されていない自治体
- **パーセンテージ表示**: マウスオーバーで詳細な割合を表示

#### 活用方法

- 全体の進捗状況を一目で把握
- カバレッジ率が低い場合は、データ収集の優先順位を検討

---

### 2. 組織タイプ別カバレッジ（棒グラフ）

![組織タイプ別カバレッジ](../images/coverage-by-type-chart.png)

#### 見方

- **横軸**: 組織タイプ（国、都道府県、市町村）
- **縦軸**: 自治体数
- **緑色の部分**: データが収集されている自治体
- **赤色の部分**: データが収集されていない自治体
- **積み上げグラフ**: 各タイプの総数と内訳を表示

#### 活用方法

- 組織タイプごとのカバレッジ状況を比較
- どの組織タイプのデータ収集が遅れているかを把握
- データ収集の優先順位を決定

---

### 3. 都道府県別カバレッジ（テーブル）

![都道府県別カバレッジ](../images/prefecture-table.png)

#### 見方

テーブルは以下の4列で構成されています：

| 列名 | 説明 |
|------|------|
| 都道府県 | 都道府県名 |
| 総数 | その都道府県内の市町村総数 |
| データあり | データが収集されている市町村数 |
| カバレッジ率 | データ取得率（パーセンテージ） |

#### 色分け

テーブルの行は、カバレッジ率に応じて色分けされています：

- **緑色（#d5f4e6）**: カバレッジ率 80%以上
- **黄色（#fff3cd）**: カバレッジ率 50-80%
- **赤色（#f8d7da）**: カバレッジ率 50%未満

#### 活用方法

- 上位10都道府県のカバレッジ状況を確認
- カバレッジ率が低い都道府県を特定
- 地域別のデータ収集戦略を検討

---

## データの更新方法

### 手順

1. ダッシュボードの最下部にある「データを更新」ボタンをクリック
2. ダッシュボードが最新のデータを取得し、自動的に更新されます
3. 更新には数秒かかる場合があります

### 更新タイミング

以下のタイミングでデータを更新することを推奨します：

- 新しいデータが収集された後
- 定期的なモニタリング（例: 毎日1回）
- データの不整合を感じたとき

### 注意事項

- 更新中は他の操作を行わないでください
- 更新が失敗した場合は、ブラウザをリロードしてください
- データベースに問題がある場合は、運用担当者に連絡してください

---

## FAQ

### Q1. ダッシュボードにアクセスできません

**A1.** 以下を確認してください：

1. ダッシュボードが起動しているか
   - 運用担当者に確認してください
2. URLが正しいか
   - `http://localhost:8050` にアクセスしてください
3. ネットワーク接続が正常か
   - ローカルネットワークに接続されているか確認してください

### Q2. データが表示されません

**A2.** 以下を確認してください：

1. データベースにデータが存在するか
   - 運用担当者に確認してください
2. ブラウザのキャッシュをクリア
   - `Ctrl + Shift + Delete`（Windows）または `Cmd + Shift + Delete`（Mac）
3. ブラウザをリロード
   - `F5`（Windows）または `Cmd + R`（Mac）

### Q3. グラフが正しく表示されません

**A3.** 以下を試してください：

1. ブラウザのキャッシュをクリア
2. ブラウザをリロード
3. 別のブラウザで試す
4. それでも解決しない場合は、運用担当者に連絡してください

### Q4. カバレッジ率が100%になりません

**A4.** これは正常な動作です。全国の自治体すべてからデータを収集するには時間がかかります。データ収集の進捗状況を確認し、優先順位を検討してください。

### Q5. 更新ボタンを押してもデータが変わりません

**A5.** 以下の理由が考えられます：

1. データベースのデータが更新されていない
   - 新しいデータが収集されていない場合、更新してもデータは変わりません
2. データ更新に失敗している
   - ブラウザの開発者ツールでエラーを確認してください
3. データベース接続に問題がある
   - 運用担当者に連絡してください

### Q6. ダッシュボードの表示が遅い

**A6.** 以下を確認してください：

1. ネットワーク接続が正常か
2. データベースのパフォーマンスが正常か
   - 運用担当者に確認してください
3. ブラウザのキャッシュをクリア
4. それでも解決しない場合は、運用担当者に連絡してください

### Q7. グラフをエクスポートできますか？

**A7.** 現在、グラフのエクスポート機能は実装されていません。スクリーンショットを使用してください。

### Q8. データのフィルタリングはできますか？

**A8.** 現在、フィルタリング機能は実装されていません。今後の拡張計画に含まれています。

---

## サポート

ダッシュボードの使用に関して問題が発生した場合は、以下の手順で対処してください：

1. このユーザーガイドのFAQセクションを確認
2. [トラブルシューティングガイド](./BI_DASHBOARD_TROUBLESHOOTING.md)を確認
3. 運用担当者に連絡
4. 問題が解決しない場合は、開発チームにエスカレーション

---

## 関連ドキュメント

- [BIダッシュボード概要](../BI_DASHBOARD.md)
- [運用手順書](./BI_DASHBOARD_OPERATIONS.md)
- [トラブルシューティングガイド](./BI_DASHBOARD_TROUBLESHOOTING.md)
