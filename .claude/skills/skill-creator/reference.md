# Skill Creator リファレンス

## スキル作成の詳細ガイド

### 1. スキルの設計原則

#### 単一責任の原則
各スキルは1つの明確な目的を持つべきです。

**良い例:**
- `test-writer`: テスト作成のみに特化
- `migration-helper`: データベース移行のみに特化

**悪い例:**
- `code-helper`: 範囲が広すぎて焦点がぼやける
- `database-and-api-helper`: 複数の責任が混在

#### アクティベーション条件の明確性
Claude Codeがいつスキルを起動すべきか明確にする必要があります。

**具体的な条件:**
- ファイルパスパターン: `src/domain/`, `tests/unit/`
- キーワード: "test", "migration", "architecture"
- 作業内容: "creating files", "modifying code", "reviewing changes"

### 2. SKILL.mdの詳細構成

#### フロントマター（Front Matter）
```markdown
---
name: skill-name
description: 1-2文の簡潔な説明。アクティベーション条件と主な機能を含む。
---
```

**name のルール:**
- ケバブケース（kebab-case）を使用
- 小文字のみ
- 意味が明確で簡潔
- 例: `test-writer`, `clean-architecture-checker`

**description のルール:**
- 50-150文字程度
- アクティベーション条件を含める
- 主な機能を明記
- 「いつ使うか」「何をチェックするか」を含める

#### セクション構成

##### 1. 目的（Purpose）
- 1-3段落で説明
- スキルが解決する問題を明確に
- 対象読者（開発者、Claude Code）を意識

##### 2. いつアクティベートするか（When to Activate）
- 箇条書きで具体的に
- ファイルパスを含める
- キーワードを含める
- 作業内容を含める

例:
```markdown
## いつアクティベートするか
このスキルは以下の場合に自動的にアクティベートされます：
- `tests/` ディレクトリ内でファイルを作成・編集する時
- ユーザーが "test", "pytest", "テスト" と言った時
- テストコードのレビュー時
```

##### 3. クイックチェックリスト（Quick Checklist）
- 3-10項目程度
- 各項目は具体的で確認可能
- チェックボックス形式 `- [ ]`
- 作業前/後に使える内容

例:
```markdown
## クイックチェックリスト

作業前に確認：
- [ ] 外部サービスのモックが設定されているか
- [ ] `@pytest.mark.asyncio` デコレータが付いているか
- [ ] テスト名が `test_` で始まっているか
```

##### 4. 詳細なガイドライン
- 複数のサブセクションに分ける
- コード例を豊富に使う
- 良い例 ✅ と悪い例 ❌ を対比
- 理由（Why）を説明

##### 5. テンプレート、リファレンス、例へのリンク
- 他のファイルへのリンクを含める
- 関連ドキュメントへのリンク

### 3. reference.mdの作成ガイド

reference.mdは詳細な技術リファレンスを提供します。

**含めるべき内容:**
- 詳細な技術説明
- 高度なパターンとテクニック
- トラブルシューティングガイド
- アンチパターンの詳細説明
- 参考リンク集

**構成例:**
```markdown
# Skill Name リファレンス

## 詳細ガイド

### パターン1: パターン名
説明とコード例

### パターン2: パターン名
説明とコード例

## トラブルシューティング

### 問題1: 問題の説明
解決方法

## アンチパターン

### アンチパターン1
なぜ悪いか、どう修正するか

## 参考資料
- リンク1
- リンク2
```

### 4. examples.mdの作成ガイド

examples.mdは具体的なコード例を提供します。

**含めるべき内容:**
- 実際のコード例（完全な実装）
- 良い例と悪い例の対比
- ステップバイステップの説明
- コメント付きコード

**構成例:**
```markdown
# Skill Name 例集

## 例1: 基本的な使い方

### 悪い例 ❌
```python
# 問題のあるコード
```

**問題点:**
- 問題1
- 問題2

### 良い例 ✅
```python
# 改善されたコード
```

**改善点:**
- 改善1
- 改善2

## 例2: 高度な使い方
...
```

### 5. templates/ディレクトリの作成ガイド

templates/ディレクトリには再利用可能なコードテンプレートを配置します。

**テンプレートの種類:**
- コードスケルトン
- 設定ファイルテンプレート
- テストテンプレート
- ドキュメントテンプレート

**テンプレートのルール:**
- 実際に使える完全なコード
- プレースホルダーを `{variable_name}` 形式で
- コメントで使い方を説明
- 拡張子は実際のファイル形式に合わせる

**例: `templates/usecase_template.py`**
```python
"""
{UseCase名} Use Case

目的: {目的の説明}
"""
from src.application.dto.{dto_module} import {InputDTO}, {OutputDTO}
from src.domain.repositories.{repository} import I{Entity}Repository


class {UseCase名}UseCase:
    """
    {UseCase名}のユースケース
    """

    def __init__(self, repository: I{Entity}Repository):
        self.repository = repository

    async def execute(self, input_dto: {InputDTO}) -> {OutputDTO}:
        """
        {処理の説明}

        Args:
            input_dto: {説明}

        Returns:
            {OutputDTO}: {説明}
        """
        # TODO: 実装
        pass
```

## スキルの命名規則

### ディレクトリ名
- ケバブケース: `skill-name`
- 小文字のみ
- ハイフンで単語を区切る
- 動詞を含めると良い: `test-writer`, `migration-helper`

### ファイル名
- `SKILL.md`: 大文字（必須）
- `reference.md`: 小文字（任意）
- `examples.md`: 小文字（任意）
- `templates/`: 小文字（任意）

## スキルのスコープ設定

### 適切なスコープ
各スキルは以下の基準で範囲を決めます：

1. **狭すぎるスコープ（避ける）**
   - 1つの関数だけをカバー
   - 特定のファイル1つだけ

2. **適切なスコープ**
   - 1つの明確な目的
   - 関連する複数のタスク
   - 再利用可能なパターン

3. **広すぎるスコープ（避ける）**
   - 複数の異なる目的
   - 関連性の薄い機能の集合

### 例
- ✅ 適切: `test-writer` - テスト作成全般をカバー
- ❌ 狭すぎる: `pytest-asyncio-helper` - 特定のライブラリのみ
- ❌ 広すぎる: `code-quality-checker` - 範囲が不明確

## スキルの品質チェックリスト

### コンテンツの質
- [ ] 目的が1-2段落で明確に説明されている
- [ ] アクティベーション条件が3つ以上列挙されている
- [ ] クイックチェックリストが実用的（3-10項目）
- [ ] コード例が豊富に含まれている
- [ ] 良い例と悪い例が対比されている
- [ ] 日本語で記述されている（コード除く）

### 構造の質
- [ ] フロントマターが正しく設定されている
- [ ] セクション構成が明確
- [ ] リンクがすべて機能する
- [ ] テンプレートが実際に使える
- [ ] ファイル名が規則に従っている

### 実用性
- [ ] 既存スキルと重複していない
- [ ] 実際の開発作業で使える
- [ ] チェック項目が確認可能
- [ ] テンプレートがコピー＆ペースト可能

## スキルのメンテナンス

### 更新が必要な場合
- プロジェクトのアーキテクチャが変更された時
- ベストプラクティスが更新された時
- ユーザーからフィードバックがあった時
- 新しいツールやライブラリが導入された時

### 更新時の注意点
- 既存のリンクが切れないようにする
- 後方互換性を保つ
- 変更履歴を記録（コミットメッセージで）
- 関連するスキルも同時に更新

## 既存スキルとの統合

### 関連スキルとの連携
- 相互リンクを適切に設定
- 役割分担を明確化
- 重複を避ける

### 例
- `test-writer` と `clean-architecture-checker` はテストとアーキテクチャという異なる側面をカバー
- `migration-helper` はデータベース移行に特化、他のスキルとは独立

## トラブルシューティング

### スキルが起動しない
**原因:**
- フロントマターの形式が間違っている
- name または description が欠けている
- ファイル名が `SKILL.md` になっていない

**解決方法:**
- フロントマターの YAML 形式を確認
- 必須フィールドがすべて含まれているか確認
- ファイル名を正確に `SKILL.md` にする

### スキルが期待通りに動作しない
**原因:**
- アクティベーション条件が不明確
- description が具体性に欠ける

**解決方法:**
- より具体的な条件を追加
- ファイルパスやキーワードを明記

## 参考資料

### 既存スキル
- `test-writer`: 最も包括的な例
- `clean-architecture-checker`: チェックリスト重視の例
- `migration-helper`: シンプルで焦点が明確な例

### 関連ドキュメント
- [CLAUDE.md](../../../CLAUDE.md): プロジェクト全体のガイド
- [docs/DEVELOPMENT_GUIDE.md](../../../docs/DEVELOPMENT_GUIDE.md): 開発ガイド
